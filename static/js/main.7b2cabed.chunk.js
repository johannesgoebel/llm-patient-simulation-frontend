(this["webpackJsonpai-avatar-frontend"]=this["webpackJsonpai-avatar-frontend"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(7),l=a.n(r),s=a(4);a(16),a(6);var o=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(""),[l,s]=Object(n.useState)(null),[o,i]=Object(n.useState)(null),[m,d]=Object(n.useState)(null),[h,u]=Object(n.useState)("Astrid Seeger"),p=async()=>{try{const e=await fetch("http://127.0.0.1:8000/conversation/current_prompt",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();d(t.message)}catch(l){console.error("Error fetching data:",l)}},E=async e=>{try{const a="http://127.0.0.1:8000/conversation/vignette?name=".concat(encodeURIComponent(e));(await fetch(a,{method:"POST"})).ok?(u(e),v(),p(),t([])):console.error("Failed to update vignette")}catch(l){console.error("Error:",l)}},v=async()=>{try{const e=await fetch("http://127.0.0.1:8000/conversation/load_case_vignette",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();i(t.message)}catch(l){console.error("Error fetching data:",l)}};Object(n.useEffect)(()=>{v(),p()},[]);return c.a.createElement("div",{className:"overflow-hidden"},c.a.createElement("div",{className:"container mt-5",style:{overflowY:"hidden",minHeight:"100%",maxHeight:"100%"}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"h-100 d-flex flex-column justify-content-center align-items-center"},c.a.createElement("div",null,c.a.createElement("h4",{style:{margin:"20px"}},"Auswahl der Fallvignette"),c.a.createElement("div",null,c.a.createElement("button",{type:"button",className:"btn btn-lg ".concat("Astrid Seeger"===h?"btn-primary":"btn-secondary"),onClick:()=>E("Astrid Seeger")},"Astrid Seeger"),c.a.createElement("button",{type:"button",className:"btn btn-lg ".concat("Michael Schulze"===h?"btn-primary":"btn-secondary"),onClick:()=>E("Michael Schulze")},"Michael Schulze"))),c.a.createElement("div",{className:"card-columns"},c.a.createElement("div",{className:"card",style:{margin:"20px"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},"Aktueller Prompt"),m?c.a.createElement("p",{className:"card-text"},m):c.a.createElement("div",{className:"card-text"},c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"visually-hidden"},"Loading..."))))),c.a.createElement("div",{className:"card p-3",style:{margin:"20px"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},"System Prompt"),o?c.a.createElement("p",{className:"card-text"},o):c.a.createElement("div",{className:"card-text"},c.a.createElement("div",{className:"spinner-border",role:"status"},c.a.createElement("span",{className:"visually-hidden"},"Loading...")))))))),c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"overflow-hidden"},c.a.createElement("div",{className:"card",style:{overflowY:"hidden",minHeight:"100%",maxHeight:"100%"}},c.a.createElement("div",{className:"card-header"},c.a.createElement("h2",null,"Chat ")),c.a.createElement("div",{className:"card-body d-flex flex-column",style:{height:"400 px"}},c.a.createElement("div",{className:"mb-3 flex-grow-1",style:{overflowY:"scroll",border:"1px solid #ccc",padding:"10px",minHeight:"400px"}},e.map((e,t)=>((e,t)=>{const a="Me"===e.user;return c.a.createElement("div",{key:t,className:"d-flex ".concat(a?"justify-content-end":"justify-content-start"," my-2")},c.a.createElement("div",{className:"p-2 rounded ".concat(a?"bg-primary text-white":"bg-light text-dark"),style:{maxWidth:"70%"}},e.text))})(e,t))),c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("input",{type:"text",className:"form-control",value:a,onChange:e=>r(e.target.value),placeholder:"Hier Nachricht eintragen.."}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{onClick:async()=>{if(a)try{const n=localStorage.getItem("basicAuthChatWithPatient");if(!n)throw new Error("Authentication token not found");const c=n.split(" ")[1],l=atob(c),[o,i]=l.split(":");console.log("Username:",o),console.log("Password:",i);const m="http://127.0.0.1:8000/retrieve_answer?message=".concat(encodeURIComponent(a)),d=await fetch(m,{method:"POST",headers:{accept:"application/json"}});if(!d.ok)throw new Error("Failed to retrieve answer");const h=await d.json();t([...e,{user:"Me",text:a},{user:"Bot",text:h.answer}]),r(""),p(),s(null)}catch(l){s(l.message)}},className:"btn btn-primary"},"Senden"))),l&&c.a.createElement("div",{className:"alert alert-danger mt-3"},l))))))))},i=(a(17),a(2));var m=function(){return c.a.createElement(i.c,null,c.a.createElement(i.a,{path:"/",element:c.a.createElement(o,null)}))};var d=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:r,getTTFB:l}=t;a(e),n(e),c(e),r(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(c.a.createElement(s.a,{basename:"/llm-patient-simulation-frontend"},c.a.createElement(m,null))),d()},8:function(e,t,a){e.exports=a(18)}},[[8,1,2]]]);
//# sourceMappingURL=main.7b2cabed.chunk.js.map